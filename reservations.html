<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="Kirat Sweets And Dairy Logo.jpeg" type="x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book A Table - Kirat Sweets</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Kay+Pho+Du:wght@500;600&family=Oswald:wght@300;600&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style3.css">
</head>

<body>
    <div class="hamburger-menu" id="hamburgerMenu">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </div>
    <nav class="menu" id="menu">
        <button id="closeBtn" style="display: none;">âœ•</button>
        <ul>
            <div id="user-circle"
                style="display:none; margin-top: 20px;  margin-left: 37%;  background-color: #00e6e4; color: black; width: 60px; height: 60px; border-radius: 50%; font-size: 30px; justify-content: center; align-items: center; text-align: center; padding: 5px; line-height: 52px;  font-family: Merriweather, serif;">
                <span id="user-initial"></span>
            </div>
            <!-- User Info Dropdown -->
            <div id="user-info"
                style="display:none; position: absolute; top: 18%; right: 15px; background-color: #fff; border: 1px solid #ccc; padding: 10px; border-radius: 8px; width: 200px;">
                <p><strong style="color: black;">Name:</strong> <span id="user-name" style="color: black;"></span>
                </p>
                <p><strong style="color: black;">Email:</strong> <span id="user-email" style="color: black;"></span>
                </p>
                <button id="logout"
                    style="background-color: red; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Sign
                    Out</button>
            </div>
            <div class="pbar">
                <li><button id="sign-in" onclick="navigateTo('login.html')">Sign-In</button></li>
                <li><button id="sign-up" onclick="navigateTo('signup.html')">Sign-Up</button></li>
                <li><button onclick="navigateTo('home.html')">Home</button>
                <li><button onclick="navigateTo('about.html')">About Us</button>
                <li><button onclick="navigateTo('menu.html')">Menu</button>
                <li><button onclick="navigateTo('blogs.html')">Blogs</button>
                <li><button onclick="navigateTo('events.html')">Upcoming</button>
                <li><button onclick="navigateTo('online_order.html')">Delivery</button>
                <li><button onclick="navigateTo('gallery.html')">Gallery</button>
                <li><button onclick="navigateTo('contact.html')">Contact Us</button>
                    <li><button onclick="window.location.href='https://kirat-sweets-blog.onrender.com/'">Feedback</button>
                <li><button onclick="navigateTo('faq.html')">FAQ's</button>

            </div>
        </ul>
    </nav>
    <header>Book A Table - Kirat Sweets</header>
    <div class="content">
        <div class="images-container">
            <img src="Brown Flat Illustrative Chef Restaurant Logo.gif" alt="Chef Logo">
            <img src="Kirat Sweets.jpg" alt="Kirat Sweets Restaurant">
            <img src="https://ideogram.ai/assets/progressive-image/balanced/response/iPxH_RkATf-7zX247Jkduw"
                alt="Interior Image">
        </div>
        <div class="button-container">
            <button
                onclick="window.open('https://docs.google.com/forms/d/e/1FAIpQLSf9Bx7P9UAhGS5zylZ4MM8fQV5jYe4JR0lNxN5bh_CDuKvzgg/viewform?usp=sf_link', '_blank')">
                Book A Table Now
            </button>
            <!-- <button onclick="window.open('https://wa.me/+918968618061?text=Hello!%20I%20would%20like%20to%20inquire%20about%20booking%20a%20table%20at%20Kirat%20Sweets.', '_blank');">
                Contact Us on WhatsApp
            </button> -->
            <div class="WhatsApp">For booking related queries please feel free to <a
                    href="https://wa.me/+918968618061?text=Hello!%20I%20would%20like%20to%20inquire%20about%20booking%20a%20table%20at%20Kirat%20Sweets"
                    target="_blank" style="text-decoration: none; color: #1f9a23; font-weight: 850;">Contact Us On
                    WhatsApp!</a></div>
        </div>
        <div class="marquee-container">
            <marquee scrollamount="10">
                Our doors are open every day from 6:00 AM to 10:00 PM. Don't forget to clock in and out during these
                hours!
            </marquee>
        </div>
        <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

        <df-messenger intent="WELCOME" chat-title="SweetBot" agent-id="3a074787-2f24-469a-91ff-6adc0e24cfc8"
            language-code="en"></df-messenger>
    </div>

    <!-- Floating Order Now Button -->
    <button class="order-now" onclick="navigateTo('online_order.html')">
        Order Meal
    </button>
    </div>
    <script src="mainmenu.js"></script>
    <script>
        function navigateTo(page) { window.location.href = page; }
    </script>
    <script type="module">
        // Firebase Authentication Setup
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-auth.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBag3dZ3-Ivgq1etvwvIzH2qMEUNo0dvMw",
            authDomain: "kirat-sweets-and-dairy-9c93a.firebaseapp.com",
            projectId: "kirat-sweets-and-dairy-9c93a",
            storageBucket: "kirat-sweets-and-dairy-9c93a.appspot.com",
            messagingSenderId: "270432947177",
            appId: "1:270432947177:web:4d8c6f601282098ae4e631",
            measurementId: "G-4M5NGKY9PH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Listen for authentication state changes
        onAuthStateChanged(auth, (user) => {
            const userCircle = document.getElementById("user-circle");
            const userInitialElement = document.getElementById("user-initial");
            const userInfo = document.getElementById("user-info");
            const signInButton = document.getElementById("sign-in");
            const signUpButton = document.getElementById("sign-up");

            if (user) {
                // Get the user's name from the displayName (if available), otherwise use a fallback
                const userName = user.displayName || user.email.split('@')[0];  // Default to the part of email before '@'
                const userEmail = user.email;  // Get the user's email

                // Generate initials from the name
                const userInitial = userName.charAt(0).toUpperCase() + (userName.charAt(userName.length - 1) || '').toUpperCase();

                userInitialElement.textContent = userInitial;  // Set the user initials
                userCircle.style.display = 'block';  // Show the user circle
                userInfo.style.display = 'none'; // Hide user info until circle is clicked
                userCircle.onclick = function () {
                    // Toggle the visibility of user info when circle is clicked
                    if (userInfo.style.display === 'none') {
                        userInfo.style.display = 'block';
                    } else {
                        userInfo.style.display = 'none';
                    }
                };

                // Set the user's name and email in the user info
                document.getElementById('user-name').textContent = userName;  // Set the user name
                document.getElementById('user-email').textContent = userEmail;  // Set the user email

                // Hide sign-in and sign-up buttons when logged in
                signInButton.style.display = "none";
                signUpButton.style.display = "none";
            } else {
                // Hide the user circle when not logged in
                userCircle.style.display = 'none';

                // Show sign-in and sign-up buttons when not logged in
                signInButton.style.display = "inline-block";
                signUpButton.style.display = "inline-block";
            }
        });

        // Function to log out
        function logout() {
            signOut(auth).then(() => {
                console.log("User signed out");
                window.location.href = 'home.html'; // Optional: Redirect after sign-out
            }).catch((error) => {
                console.error("Error signing out: ", error);
            });
        }

        // Add logout functionality when page loads
        window.onload = () => {
            const logoutButton = document.getElementById("logout");
            if (logoutButton) {
                logoutButton.addEventListener("click", logout); // Add event listener to logout button
            }
        };
    </script>
</body>

</html>